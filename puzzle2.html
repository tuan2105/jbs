<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Puzzle 2 ‚Äî Ancient Greek</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root{
            --accent: #8b5a2b; /* terracotta */
            --paper: rgba(250,240,225,0.85);
            --gold: #d4af37;
        }
        html,body{
            height:100%;
            margin:0;
            font-family: 'Cinzel', serif;
            color:#2b2b2b;
            background-image: url('https://i.ibb.co/fV7yfZks/Gemini-Generated-Image-hgbgxthgbgxthgbg.png');
            background-size: cover;
            background-position: center center;
            background-attachment: fixed;
            -webkit-font-smoothing:antialiased;
            -moz-osx-font-smoothing:grayscale;
        }
        /* subtle vignette */
        .overlay{
            background: linear-gradient(rgba(12,12,12,0.18), rgba(12,12,12,0.18));
            min-height:100%;
            display:flex;
            flex-direction:column;
            justify-content:space-between;
        }
        .page{
            max-width:900px;
            margin:48px auto 120px;
            background: linear-gradient(180deg, var(--paper), rgba(255,255,255,0.6));
            padding:36px;
            border-radius:12px;
            box-shadow:0 10px 30px rgba(0,0,0,0.25);
            border-top:6px solid var(--gold);
            border-bottom:6px solid var(--gold);
        }
        header h1{
            margin:0 0 12px 0;
            font-size:2.4rem;
            letter-spacing:2px;
        }
        header p.lead{
            margin:0 0 18px 0;
            color:#444;
        }
        .return-btn{
            display:inline-block;
            text-decoration:none;
            color:white;
            background:var(--accent);
            padding:10px 14px;
            border-radius:8px;
            border:2px solid rgba(0,0,0,0.08);
        }

        /* Greek key style bottom padlock */
        .padlock-wrap{
            position:fixed;
            left:50%;
            transform:translateX(-50%);
            bottom:18px;
            background:rgba(255,255,245,0.95);
            padding:14px 18px;
            border-radius:10px;
            box-shadow:0 8px 24px rgba(0,0,0,0.28);
            display:flex;
            align-items:center;
            gap:12px;
            border-top:6px solid var(--gold);
            border-bottom:6px solid var(--gold);
        }
        .padlock-title{
            font-weight:700;
            color:#333;
            margin-right:6px;
            letter-spacing:1px;
        }
        .key-inputs{
            display:flex;
            gap:8px;
        }
        .key-inputs input{
            width:46px;
            height:56px;
            text-align:center;
            font-size:1.6rem;
            border-radius:6px;
            border:2px solid rgba(0,0,0,0.12);
            background:linear-gradient(180deg, #fff9f0, #fff5ea);
            outline:none;
        }
        .key-inputs input:focus{
            border-color:var(--accent);
            box-shadow:0 4px 10px rgba(139,90,43,0.18);
        }
        .status-msg{
            min-width:120px;
            color:#2b2b2b;
            font-weight:600;
            text-align:center;
        }
        .status-msg.locked{ color:#b33; }
        .status-msg.unlocked{ color: #0b7a3f; }
        .open-lock{
            transform:rotate(-15deg) translateY(-6px);
            transition:transform .32s ease;
        }
        .lock-graphic{
            width:36px;
            height:36px;
            display:flex;
            align-items:center;
            justify-content:center;
            border-radius:6px;
            background:linear-gradient(180deg,#fff,#fbe6d6);
            border:2px solid rgba(0,0,0,0.08);
            font-weight:700;
            color:var(--accent);
        }
        @media (max-width:520px){
            .key-inputs input{ width:40px;height:48px;font-size:1.4rem; }
            .page{ margin:24px 12px 120px;padding:20px }
            .padlock-wrap{ gap:8px;padding:10px }
        }
        /* Modal for success popup */
        .modal{
            position:fixed;
            inset:0;
            display:flex;
            align-items:center;
            justify-content:center;
            background:rgba(0,0,0,0.5);
            visibility:hidden;
            opacity:0;
            transition:opacity .18s ease, visibility .18s;
            z-index:1200;
        }
        .modal.show{ visibility:visible; opacity:1; }
        .modal-content{
            background:linear-gradient(180deg,var(--paper),#fff);
            padding:20px 22px;
            border-radius:10px;
            text-align:center;
            box-shadow:0 12px 40px rgba(0,0,0,0.35);
            max-width:360px;
            width:90%;
            border-top:6px solid var(--gold);
        }
        .modal-content h2{ margin:0 0 8px 0; font-size:1.3rem; }
        .modal-content p{ margin:0 0 12px 0; color:#444; }
        .modal-content button{ background:var(--accent); color:#fff; border:none; padding:8px 14px; border-radius:8px; cursor:pointer; }
    </style>
</head>
<body>
    <div class="overlay">
        <main class="page" role="main">
            <header>
                <h1>Puzzle 2 ‚Äî The Beast Lock</h1>
                <p class="lead">An echo of marble and salt. Enter the six-digit code on the padlock below to open the hidden seal.</p>
                
                <p><a class="return-btn" href="index.html">‚üµ Return to index</a></p>
            </header>
            <section>
                <p>Inscription: "In wisdom, numbers reveal the path."</p>
            </section>
        </main>

        <aside class="padlock-wrap" aria-hidden="false">
            <div class="lock-graphic" id="lockGraphic">üîí</div>
            <div class="padlock-title">Padlock</div>
            <div class="key-inputs" id="keyInputs">
                <input inputmode="numeric" pattern="\d*" maxlength="1" aria-label="digit 1" />
                <input inputmode="numeric" pattern="\d*" maxlength="1" aria-label="digit 2" />
                <input inputmode="numeric" pattern="\d*" maxlength="1" aria-label="digit 3" />
                <input inputmode="numeric" pattern="\d*" maxlength="1" aria-label="digit 4" />
                <input inputmode="numeric" pattern="\d*" maxlength="1" aria-label="digit 5" />
                <input inputmode="numeric" pattern="\d*" maxlength="1" aria-label="digit 6" />
            </div>
            <div class="status-msg locked" id="statusMsg">Locked</div>
        </aside>
    </div>

    <div id="successModal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
        <div class="modal-content" role="document">
            <h2>Safe opened</h2>
            <p>M·ªü kh√≥a k√©t th√†nh c√¥ng - T√†i li·ªáu nh·∫≠n: D·ªØ li·ªáu m·ªè neo (The Anchor Data)</p>
            <button id="modalClose">OK</button>
        </div>
    </div>

    <script>
        (function(){
            // Default code for this puzzle
            const correctCode = '861213';
            const inputs = Array.from(document.querySelectorAll('#keyInputs input'));
            const status = document.getElementById('statusMsg');
            const lockGraphic = document.getElementById('lockGraphic');
            const modal = document.getElementById('successModal');
            const modalClose = modal ? modal.querySelector('button') : null;
            let opened = false;

            function updateStatus(ok){
                if(ok){
                    status.textContent = 'Unlocked';
                    status.classList.remove('locked');
                    status.classList.add('unlocked');
                    lockGraphic.textContent = 'üîì';
                    lockGraphic.classList.add('open-lock');
                } else {
                    status.textContent = 'Locked';
                    status.classList.remove('unlocked');
                    status.classList.add('locked');
                    lockGraphic.textContent = 'üîí';
                    lockGraphic.classList.remove('open-lock');
                }
            }

            function showModal(){
                if(!modal) return;
                modal.classList.add('show');
                modal.setAttribute('aria-hidden','false');
                if(modalClose) modalClose.focus();
            }
            function hideModal(){
                if(!modal) return;
                modal.classList.remove('show');
                modal.setAttribute('aria-hidden','true');
            }

            function tryCheck(){
                const code = inputs.map(i=>i.value).join('');
                if(code.length === inputs.length && !code.includes(undefined) && !code.includes(' ')){
                    if(code === correctCode){
                        updateStatus(true);
                        if(!opened){
                            opened = true;
                            showModal();
                        }
                        // optional: reveal something or redirect
                        // window.location.href = 'puzzle2-solution.html';
                    } else {
                        updateStatus(false);
                        // small shake feedback
                        status.animate([{transform:'translateX(-6px)'},{transform:'translateX(6px)'},{transform:'translateX(0)'}],{duration:300,iterations:1});
                    }
                } else {
                    updateStatus(false);
                }
            }

            inputs.forEach((input, idx)=>{
                input.addEventListener('input', e=>{
                    input.value = input.value.replace(/[^0-9]/g,'').slice(0,1);
                    if(input.value && idx < inputs.length-1){
                        inputs[idx+1].focus();
                    }
                    tryCheck();
                });
                input.addEventListener('keydown', e=>{
                    if(e.key === 'Backspace' && !input.value && idx>0){
                        inputs[idx-1].focus();
                    }
                    if(e.key === 'ArrowLeft' && idx>0){
                        inputs[idx-1].focus();
                    }
                    if(e.key === 'ArrowRight' && idx < inputs.length-1){
                        inputs[idx+1].focus();
                    }
                });
                input.addEventListener('paste', e=>{
                    e.preventDefault();
                    const paste = (e.clipboardData || window.clipboardData).getData('text').replace(/\D/g,'').slice(0, inputs.length-idx);
                    for(let i=0;i<paste.length;i++){
                        if(inputs[idx+i]) inputs[idx+i].value = paste[i];
                    }
                    const next = Math.min(inputs.length-1, idx + paste.length - 1);
                    inputs[next].focus();
                    tryCheck();
                });
            });

            // modal close handlers
            if(modalClose){
                modalClose.addEventListener('click', hideModal);
            }
            if(modal){
                modal.addEventListener('click', e=>{
                    if(e.target === modal) hideModal();
                });
            }
            window.addEventListener('keydown', e=>{
                if(e.key === 'Escape' && opened) hideModal();
            });

            // set focus to first digit when page loads
            inputs[0].addEventListener('focus', ()=>inputs[0].select());
            window.addEventListener('load', ()=> inputs[0].focus());

            // initially locked
            updateStatus(false);
        })();
    </script>
</body>
</html>